<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.&nbsp;Life Cycle of a JSP Page</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Hypermedia"><link rel="up" href="jsp.html" title="Chapter&nbsp;5.&nbsp;Java Server Pages"><link rel="prev" href="jsp_example.html" title="1.&nbsp;JSP Example"><link rel="next" href="jsp_EL.html" title="3.&nbsp;Expression Language"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;Life Cycle of a JSP Page</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="jsp_example.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Java Server Pages</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="jsp_EL.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jsp_life_cycle"></a>2.&nbsp;Life Cycle of a JSP Page</h2></div></div></div><p>A JSP page services requests as a servlet.</p><p>When a request is mapped to a JSP page, the Web container first checks whether the JSP page's servlet is older than the JSP page. If the servlet is older, the Web container translates the JSP page into a servlet class and compiles the class.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1142"></a>2.1.&nbsp;Translation and Compilation</h3></div></div></div><p>During the translation phase each type of data in a JSP page is treated differently. Static data is transformed into code that will emit the data into the response stream. JSP elements are treated as follows:</p><div class="itemizedlist"><ul type="disc"><li><p>Directives are used to control how the Web container translates and executes the JSP page.</p></li><li><p>Scripting elements are inserted into the JSP page's servlet class.</p></li><li><p>Expression language expressions are passed as parameters to calls to the JSP expression evaluator.</p></li><li><p><span><strong class="command">jsp:[set|get]Property </strong></span>elements are converted into method calls to JavaBeans components.</p></li><li><p><span><strong class="command">jsp:[include|forward]</strong></span> elements are converted into invocations of the Java Servlet API.</p></li><li><p>The<span><strong class="command"> jsp:plugin</strong></span> element is converted into browser-specific markup for activating an applet.</p></li><li><p>Custom tags are converted into calls to the tag handler that implements the custom tag.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1176"></a>2.2.&nbsp;Execution</h3></div></div></div><p>You can control various JSP page execution parameters by using page directives. Such as:</p><p><span class="bold"><strong>Handling Errors</strong></span></p><p>Any number of exceptions can arise when a JSP page is executed.</p><p>To specify that the Web container should forward control to an error page, use the following page directive at the beginning of the JSP page:</p><pre class="programlisting">&lt;%@ page errorPage="<span class="emphasis"><em>file_name</em></span>" %&gt;</pre><p>You access the error data object in an expression language expression via the page context.</p><p><span><strong class="command">${pageContext.errorData.statusCode}</strong></span> is used to retrieve the status code, and</p><p><span><strong class="command">${pageContext.errorData.throwable}</strong></span> retrieves the exception.</p><p>If the exception is generated during the evaluation of an EL expression, you can retrieve the root cause of the exception using: <span><strong class="command">${pageContext.errorData.throwable.rootCause}</strong></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1207"></a>2.3.&nbsp;Response and Page Encoding</h3></div></div></div><p>You use the contentType attribute to specify the encoding of the response:</p><pre class="programlisting">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;</pre><p>This date application specifies that the page should be encoded using UTF-8.</p><p>To set the source encoding of the page itself, you would use the following page directive.</p><pre class="programlisting">&lt;%@ page pageEncoding="UTF-8" %&gt;</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="jsp_example.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="jsp.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="jsp_EL.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">1.&nbsp;JSP Example&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;Expression Language</td></tr></table></div></body></html>