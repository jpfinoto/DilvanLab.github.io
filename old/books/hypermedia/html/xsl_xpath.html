<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.&nbsp;XPath</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Hypermedia"><link rel="up" href="xsl.html" title="Chapter&nbsp;2.&nbsp;eXtensible Stylesheet Language"><link rel="prev" href="xsl_xslt.html" title="1.&nbsp;XSLT - THE XSL Transformation Language"><link rel="next" href="xsl_xslfo.html" title="3.&nbsp;XSL Formatting Objects"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;XPath</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="xsl_xslt.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;2.&nbsp;eXtensible Stylesheet Language</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="xsl_xslfo.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xsl_xpath"></a>2.&nbsp;XPath</h2></div></div></div><p>The primary purpose of XPath is to address parts of an XML [XML] document.</p><p>In support of this primary purpose, it also provides basic facilities for manipulation of strings, numbers and booleans.</p><p>XPath uses a compact, non-XML syntax to facilitate use of XPath within URIs and XML attribute values.</p><p>In addition to its use for addressing, XPath is also designed so that it has a natural subset that can be used for matching (testing whether or not a node matches a pattern); this use of XPath is described in XSLT.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e136"></a>2.1.&nbsp;XPath Basics</h3></div></div></div><p>This is a simple XML example:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;

&lt;catalog&gt;
  &lt;cd country="USA"&gt;
    &lt;title&gt;Empire Burlesque&lt;/title&gt;
    &lt;artist&gt;Bob Dylan&lt;/artist&gt;
    &lt;price&gt;10.90&lt;/price&gt;
  &lt;/cd&gt;
  &lt;cd country="UK"&gt;
    &lt;title&gt;Hide your heart&lt;/title&gt;
    &lt;artist&gt;Bonnie Tyler&lt;/artist&gt;
    &lt;price&gt;9.90&lt;/price&gt;
  &lt;/cd&gt;
&lt;/catalog&gt;</pre><p>The XPath expression below selects all the price elements of the cd element of the catalog element:</p><pre class="programlisting">/catalog/cd/price</pre><p>Note: If the path starts with a slash ( / ) it represents an absolute path to an element!</p><p>Note: If the path starts with two slashes ( // ) then all elements in the document that fulfill the criteria will be selected (even if they are at different levels in the XML tree)!</p><p>The following XPath expression selects all the cd elements in the document:</p><pre class="programlisting">//cd</pre><p>XPath defines a library of standard functions for working with strings, numbers and Boolean expressions.</p><p>The XPath expression below selects all the cd elements that have a price element with a value larger than 10.80:</p><pre class="programlisting">/catalog/cd[price&gt;10.80]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e161"></a>2.2.&nbsp;Pattern Matching</h3></div></div></div><p><span class="bold"><strong>Selecting Unknown Elements</strong></span></p><p>Wildcards ( * ) can be used to select unknown XML elements.</p><p>The following XPath expression selects all the child elements of all the cd elements of the catalog element:</p><pre class="programlisting">/catalog/cd/*</pre><p>The following XPath expression selects all the price elements that are grandchild elements of the catalog element:</p><pre class="programlisting">/catalog/*/price</pre><p>The following XPath expression selects all price elements which have 2 ancestors:</p><pre class="programlisting">/*/*/price</pre><p>The following XPath expression selects all elements in the document:</p><pre class="programlisting">//*</pre><p><span class="bold"><strong>Selecting Branches</strong></span></p><p>By using square brackets in an XPath expression you can specify an element further.</p><p>The following XPath expression selects the first cd child element of the catalog element:</p><pre class="programlisting">/catalog/cd[1]</pre><p>The following XPath expression selects the last cd child element of the catalog element (Note: There is no function named first()):</p><pre class="programlisting">/catalog/cd[last()]</pre><p>The following XPath expression selects all the price elements of all the cd elements of the catalog element that have a price element with a value of 10.90:</p><pre class="programlisting">/catalog/cd[price=10.90]/price</pre><p><span class="bold"><strong>Selecting Several Paths</strong></span></p><p>By using the | operator in an XPath expression you can select several paths.</p><p>The following XPath expression selects all the title and artist elements in the document:</p><pre class="programlisting">//title | //artist</pre><p>The following XPath expression selects all the title elements of the cd element of the catalog element, and all the artist elements in the document:</p><pre class="programlisting">/catalog/cd/title | //artist</pre><p><span class="bold"><strong>Selecting Attributes</strong></span></p><p>In XPath all attributes are specified by the @ prefix.</p><p>This XPath expression selects all cd elements which have an attribute named country with a value of 'UK':</p><pre class="programlisting">//cd[@country='UK']</pre><p>This XPath expression selects all cd elements which have any attribute:</p><pre class="programlisting">//cd[@*]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e228"></a>2.3.&nbsp;Location Path Expression</h3></div></div></div><p>A location path can be absolute or relative.</p><p>An absolute location path starts with a slash ( / ) and a relative location path does not. In both cases the location path consists of one or more location steps, each separated by a slash:</p><pre class="programlisting">An absolute location path:
/step/step/...

A relative location path:
step/step/...</pre><p>The location steps are evaluated in order one at a time, from left to right. Each step is evaluated against the nodes in the current node-set. If the location path is absolute, the current node-set consists of the root node. If the location path is relative, the current node-set consists of the node where the expression is being used. Location steps consist of:</p><div class="itemizedlist"><ul type="disc"><li><p>an axis (specifies the tree relationship between the nodes selected by the location step and the current node)</p></li><li><p>a node test (specifies the node type and expanded-name of the nodes selected by the location step)</p></li><li><p>zero or more predicates (use expressions to further refine the set of nodes selected by the location step)</p></li></ul></div><p>The syntax for a location step is:</p><pre class="programlisting">axisname::nodetest[predicate]</pre><p>Example:</p><pre class="programlisting">child::price[price=9.90]</pre><p><span class="bold"><strong>Axes and Node Tests</strong></span></p><p>An axis defines a node-set relative to the current node. A node test is used to identify a node within an axis. We can perform a node test by name or by type.</p><div class="table"><a name="d0e262"></a><p class="title"><b>Table&nbsp;2.1.&nbsp;Axis Name Examples</b></p><table summary="Axis Name Examples" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><tbody><tr><td><span class="bold"><strong>Example</strong></span></td><td><span class="bold"><strong>Result</strong></span></td></tr><tr><td>child::cd</td><td>Selects all cd elements that are children of the current node (if the current node has no cd children, it will select an empty node-set)</td></tr><tr><td>attribute::src</td><td>Selects the src attribute of the current node (if the current node has no src attribute, it will select an empty node-set)</td></tr><tr><td>child::*</td><td>Selects all child elements of the current node</td></tr><tr><td>attribute::*</td><td>Selects all attributes of the current node</td></tr><tr><td>child::text()</td><td>Selects the text node children of the current node</td></tr><tr><td>child::node()</td><td>Selects all the children of the current node</td></tr><tr><td>ancestor-or-self::cd</td><td>Selects all cd ancestors of the current node and, if the current node is a cd element, the current node as well</td></tr><tr><td>child::*/child::price</td><td>Selects all price grandchildren of the current node</td></tr></tbody></table></div><p><span class="bold"><strong>Predicates</strong></span></p><p>A predicate filters a node-set into a new node-set. A predicate is placed inside square brackets ( [ ] ).</p><div class="table"><a name="d0e319"></a><p class="title"><b>Table&nbsp;2.2.&nbsp;Predicates Example</b></p><table summary="Predicates Example" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><tbody><tr><td><span class="bold"><strong>Example</strong></span></td><td><span class="bold"><strong>Result</strong></span></td></tr><tr><td>child::cd[position()=1]</td><td>Selects the first cd child of the current node</td></tr><tr><td>child::cd[position()&lt;6]</td><td>Selects the first five cd children of the current node</td></tr><tr><td>/descendant::cd[position()=7]</td><td>Selects the seventh cd element in the document</td></tr><tr><td>child::cd[attribute::type="classic"]</td><td>Selects all cd children of the current node that have a type attribute with value classic</td></tr><tr><td>child::cd[position()=last()-1]</td><td>Selects the last but one cd child of the current node</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e356"></a>2.4.&nbsp;XPath Functions</h3></div></div></div><p>The XPath function library contains a set of core functions for converting and translating data.</p><div class="table"><a name="d0e361"></a><p class="title"><b>Table&nbsp;2.3.&nbsp;Examples of XPath Functions</b></p><table summary="Examples of XPath Functions" border="1"><colgroup><col width="33%"><col width="33%"><col width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Name</strong></span></td><td><span class="bold"><strong>Description</strong></span></td><td><span class="bold"><strong>Syntax</strong></span></td></tr><tr><td>count()</td><td>Returns the number of nodes in a node-set</td><td><pre class="programlisting">number=count(node-set)</pre></td></tr><tr><td>id()</td><td>Selects elements by their unique ID</td><td><pre class="programlisting">node-set=id(value)</pre></td></tr><tr><td>last()</td><td>Returns the position number of the last node in the processed node list</td><td><pre class="programlisting">number=last()</pre></td></tr><tr><td>local-name()</td><td>Returns the local part of a node. A node usually consists of a prefix, a colon, followed by the local name</td><td><pre class="programlisting">string=local-name(node)</pre></td></tr><tr><td>name()</td><td>Returns the name of a node</td><td><pre class="programlisting">string=name(node)</pre></td></tr><tr><td>namespace-uri()</td><td>Returns the namespace URI of a specified node</td><td><pre class="programlisting">uri=namespace-uri(node)</pre></td></tr><tr><td>position()</td><td>Returns the position in the node list of the node that is currently being processed</td><td><pre class="programlisting">number=position()</pre></td></tr><tr><td>concat()</td><td>Returns the concatenation of all its arguments</td><td><pre class="programlisting">string=concat(val1, val2, ..)

Example:
concat('The',' ','XML')
Result: 'The XML'
</pre></td></tr><tr><td>contains()</td><td>Returns true if the second string is contained within the first string, otherwise it returns false</td><td><pre class="programlisting">bool=contains(val,substr)

Example:
contains('XML','X')
Result: true</pre></td></tr><tr><td>substring()</td><td>Returns a part of the string in the string argument</td><td><pre class="programlisting">string=substring(string,start,length)
Example:
substring('Beetles',1,4)
Result: 'Beet'</pre></td></tr><tr><td>ceiling()</td><td>Returns the smallest integer that is not less than the number argument</td><td><pre class="programlisting">number=ceiling(number)
Example:
ceiling(3.14)
Result: 4</pre></td></tr><tr><td>round()</td><td>Rounds the number argument to the nearest integer</td><td><pre class="programlisting">integer=round(number)
Example:
round(3.14)
Result: 3</pre></td></tr><tr><td>lang()</td><td>Returns true if the language argument matches the language of the xsl:lang element, otherwise it returns false</td><td><pre class="programlisting">bool=lang(language)</pre></td></tr><tr><td>not()</td><td>Returns true if the condition argument is false, and false if the condition argument is true</td><td><pre class="programlisting">bool=not(condition)
Example:
not(false())</pre></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e488"></a>2.5.&nbsp;Xpath Examples</h3></div></div></div><p>You can try some of the XPath commands at the <a href="http://www.w3schools.com/xpath/tryit.asp?filename=try_xpath_select_cdnodes" target="_top">XPath Tutorial Test</a> page. This page is a part of the <a href="http://www.w3schools.com/xpath/" target="_top">XPath Tutorial</a> at the <a href="http://www.w3schools.com" target="_top">http://www.w3schools.com</a> :</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="xsl_xslt.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="xsl.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="xsl_xslfo.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">1.&nbsp;XSLT - THE XSL Transformation Language&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;XSL Formatting Objects</td></tr></table></div></body></html>