<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>5.&nbsp;Exceptions and Preconditions</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Object Oriented Computing"><link rel="up" href="specification.html" title="Chapter&nbsp;15.&nbsp;Specification"><link rel="prev" href="specification_declarative_specification.html" title="4.&nbsp;Declarative Specification"><link rel="next" href="specification_shorthands.html" title="6.&nbsp;Shorthands"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.&nbsp;Exceptions and Preconditions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="specification_declarative_specification.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;15.&nbsp;Specification</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="specification_shorthands.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="specification_exceptions_and_preconditions"></a>5.&nbsp;Exceptions and Preconditions</h2></div></div></div><p>An obvious design issue is whether to use a precondition, and if so, whether it should be checked.</p><div class="itemizedlist"><ul type="disc"><li><p>a precondition does not require that checking be performed.</p></li><li><p>On the contrary, the most common use of preconditions is to demand a property precisely because it would be hard or expensive to check.</p></li></ul></div><p>A non-trivial precondition renders the method partial. This inconveniences clients, because they have to ensure that they don&#8217;t call the method in a bad state.</p><p>So users of methods don&#8217;t like preconditions, and for this reason the <span class="emphasis"><em>methods of a library will usually be total</em></span>.</p><p>But sometimes though, a precondition allows you to write <span class="emphasis"><em>more efficient</em></span> code and saves trouble.</p><p>The decision of whether to use a precondition is an engineering judgment. The key factors are:</p><div class="itemizedlist"><ul type="disc"><li><p>the cost of the check (in writing and executing code)</p></li><li><p>the scope of the method: if it&#8217;s only called locally in a class, the precondition can be discharged by carefully checking all the sites that call the method.</p></li></ul></div><p>Sometimes, it&#8217;s not feasible to check a condition without making a method unacceptably slow, and a precondition is often necessary in this case.</p><p><span class="bold"><strong>Example:</strong></span> In the Java standard library, for example, the binary search methods of the Arrays class require that the array given be sorted. To check that the array is sorted would defeat the entire purpose of the binary search: to obtain a result in logarithmic and not linear time.</p><p>Even if you decide to use a precondition, it may be possible to insert useful checks that may detect that the precondition was violated.</p><p><span class="bold"><strong>Example:</strong></span> For example, in balancing the binary tree, you might check when you visit a node that its children are appropriately ordered.</p><p>If a precondition is found to be violated, you should throw an unchecked <span class="emphasis"><em>exception</em></span>, since the client will not be expected to handle it. The throwing of the exception will not be mentioned in the specification, although it can appear in implementation notes below it.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="specification_declarative_specification.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="specification.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="specification_shorthands.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">4.&nbsp;Declarative Specification&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;6.&nbsp;Shorthands</td></tr></table></div></body></html>