<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.&nbsp;Security Manager</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.0"><link rel="start" href="index.html" title="Distributed Programming using Java"><link rel="up" href="extra_reading_distributed_applications.html" title="Chapter&nbsp;9.&nbsp;Extra Reading: Distributed Applications"><link rel="prev" href="extra_reading_distributed_applications.html" title="Chapter&nbsp;9.&nbsp;Extra Reading: Distributed Applications"><link rel="next" href="extra_reading_distributed_applications_applications.html" title="2.&nbsp;Applications"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.&nbsp;Security Manager</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="extra_reading_distributed_applications.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Extra Reading: Distributed Applications</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="extra_reading_distributed_applications_applications.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="extra_reading_distributed_applications_security_manager"></a>1.&nbsp;<a href="/library/books/tutorial1.02/networking/security/index.html" target="_top">Security Manager</a></h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5254"></a>1.1.&nbsp;<a href="/library/books/tutorial1.02/networking/security/intro.html" target="_top">Introducing the Security Manager</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5258"></a>1.1.1.&nbsp;Definition</h4></div></div></div><p>The security manager is an application-wide object that determines whether potentially threatening operations should be allowed.</p><p>The classes in the Java packages cooperate with the security manager by asking the application's security manager for permission to perform certain operations.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5265"></a>1.1.2.&nbsp;Default</h4></div></div></div><p>An application does not have a security manager. It allows all operations that are subject to security restrictions.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>The existing browsers and applet viewers do create their own security manager when starting up.</p></td></tr></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5273"></a>1.2.&nbsp;<a href="/library/books/tutorial1.02/networking/security/writingSMgr.html" target="_top">Writing a Security Manager</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5277"></a>1.2.1.&nbsp;Why to write one?</h4></div></div></div><p>To impose a stricter policy security policy.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5282"></a>1.2.2.&nbsp;The example's policy:</h4></div></div></div><p>The policy implemented by our example prompts the user for a password when the application attempts to open a file for reading or for writing.</p><p><a href="../audio/Servers16.asf" target="_top"><img src="resources/asf.gif">Audio in Portuguese</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5291"></a>1.2.3.&nbsp;The code</h4></div></div></div><pre class="programlisting">class PasswordSecurityManager extends SecurityManager {
     PasswordSecurityManager(String password) {
        super();
        this.password = password;
     }
private boolean accessOK() {
    . . . 
       Asks a password from the user using stdin
    . . .
} 
public void checkRead(FileDescriptor filedescriptor) {
    if (!accessOK())
        throw new SecurityException("Not a Chance!");
}
public void checkRead(String filename) {
    if (!accessOK())
        throw new SecurityException("No Way!");
}
public void checkRead(String filename, Object executionContext) {
    if (!accessOK())
        throw new SecurityException("Forget It!");
}
public void checkWrite(FileDescriptor filedescriptor) {
    if (!accessOK())
        throw new SecurityException("Not!");
}
public void checkWrite(String filename) {
    if (!accessOK())
        throw new SecurityException("Not Even!");
}

}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5296"></a>1.3.&nbsp;<a href="/library/books/tutorial1.02/networking/security/installSMgr.html" target="_top">Installing Your Security Manager</a></h3></div></div></div><pre class="programlisting">try {
        System.setSecurityManager(new PasswordSecurityManager("Booga Booga"));
} catch (SecurityException se) {
        System.out.println("SecurityManager already set!");
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>The security manager for an application can be set only once. Typically, a browser sets its security manager during its startup procedure.</p></td></tr></table></div><p><a href="../audio/Servers17.asf" target="_top"><img src="resources/asf.gif">Audio in Portuguese</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5309"></a>1.4.&nbsp;<a href="/library/books/tutorial1.02/networking/security/more.html" target="_top">Deciding What SecurityManager Methods to Override</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5313"></a>1.4.1.&nbsp;Default Method's implementation</h4></div></div></div><pre class="programlisting">public void checkXXX(. . .) throws SecurityException{
       throw new SecurityException();
}</pre><p>You may have to overload many SecurityManager methods to get the behavior you wish.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5320"></a>1.4.2.&nbsp;SecurityManager methods</h4></div></div></div><div class="table"><a name="d0e5323"></a><p class="title"><b>Table&nbsp;9.1.&nbsp;SecurityManager Methods</b></p><table summary="SecurityManager Methods" border="1"><colgroup><col align="center" width="50%"><col width="50%"></colgroup><thead><tr><th align="center">Operations On</th><th align="center">Approved By</th></tr></thead><tbody><tr><td align="center">sockets</td><td>checkAccept(String host, int port) checkConnect(String host, int port) checkConnect(String host, int port, Object Context) checkListen(int port)</td></tr><tr><td align="center">threads</td><td>checkAccess(Thread thread) checkAccess(ThreadGroup threadgroup)</td></tr><tr><td align="center">class loader</td><td>checkCreateClassLoader()</td></tr><tr><td align="center">file system</td><td>checkDelete(String filename) checkLink(String library) checkRead(FileDescriptor filedescriptor) checkRead(String filename) checkRead(String filename, Object executionContext) checkWrite(FileDescriptor filedescriptor) checkWrite(String filename)</td></tr><tr><td align="center">system commands</td><td>checkExec(String command)</td></tr><tr><td align="center">interpreter</td><td>checkExit(int status)</td></tr><tr><td align="center">package</td><td>checkPackageAccess(String packageName) checkPackageDefinition(String packageName)</td></tr><tr><td align="center">properties</td><td>checkPropertiesAccess() checkPropertyAccess(String key) checkPropertyAccess(String key, String def)</td></tr><tr><td align="center">networking</td><td>checkSetFactory()</td></tr><tr><td align="center">windows</td><td>checkTopLevelWindow(Object window)</td></tr></tbody></table></div><p><a href="../audio/Servers18.asf" target="_top"><img src="resources/asf.gif">Audio in Portuguese</a></p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="extra_reading_distributed_applications.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="extra_reading_distributed_applications.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="extra_reading_distributed_applications_applications.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;9.&nbsp;Extra Reading: Distributed Applications&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;2.&nbsp;Applications</td></tr></table></div></body></html>