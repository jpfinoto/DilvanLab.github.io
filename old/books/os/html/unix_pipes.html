<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>5.&nbsp;Pipes</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.0"><link rel="start" href="index.html" title="Operating Systems"><link rel="up" href="unix.html" title="Chapter&nbsp;2.&nbsp;Unix"><link rel="prev" href="unix_signals.html" title="4.&nbsp;Signals"><link rel="next" href="unix_file_system.html" title="6.&nbsp;File System"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.&nbsp;Pipes</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="unix_signals.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;2.&nbsp;Unix</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="unix_file_system.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix_pipes"></a>5.&nbsp;Pipes</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Pipes</p><p><span class="bold"><strong>Definition</strong></span>:</p><p>A one-way data path between two processes:</p><div class="figure"><a name="d0e1282"></a><p class="title"><b>Figure&nbsp;2.6.&nbsp;Pipe</b></p><div class="mediaobject"><img src="resources/Unix1.gif" alt="Pipe"></div></div><p><span class="bold"><strong>Creation</strong></span>:</p><pre class="programlisting">int fd[2]; int pipe(fd); fork(); ...</pre><p>Two file descriptors are created: fd[0] for reading &amp; fd[1] for writing. They are copied to the child process:</p><div class="figure"><a name="d0e1296"></a><p class="title"><b>Figure&nbsp;2.7.&nbsp;Two Pipes</b></p><div class="mediaobject"><img src="resources/Unix2.gif" alt="Two Pipes"></div></div><p>To construct the one-way pipe, the Parent process close its read fd and the child its write fd.</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>Piping many processes</p><p>The stdout of a process can be connected to the stdin of another through a pipe. For instance, that is what happens when the following shell command is executed:</p><pre class="programlisting">who | sort | lpr</pre><p>The shell program will use the pipe system call to create the following construction:</p><div class="figure"><a name="d0e1314"></a><p class="title"><b>Figure&nbsp;2.8.&nbsp;Piping Processes</b></p><div class="mediaobject"><img src="resources/Unix3.gif" alt="Piping Processes"></div></div></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>Two-way Connections</p><p>To create a two-way connection between process, two pipes have to be created. One in each direction:</p><div class="figure"><a name="d0e1326"></a><p class="title"><b>Figure&nbsp;2.9.&nbsp;Two-way Connection</b></p><div class="mediaobject"><img src="resources/Unix4.gif" alt="Two-way Connection"></div></div><p>Creation Sequence:</p><pre class="programlisting"><span class="bold"><strong>Parent Child </strong></span> Create Pipe 1 and Pipe 2 Fork Close read fd of Pipe1 Close write fd of Pipe1 Close write fd of Pipe2 Close read fd of Pipe 2 </pre></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>FIFO (named pipes)</p><p>Named Pipes are Pipes that have a name associated with them. They are used as data path between processes that are not related to each other.</p><p><span class="bold"><strong>Creation</strong></span>: They are created through the mknod call:</p><pre class="programlisting">int mknod ( char *pathname, int mode, int dev);</pre><div class="itemizedlist"><ul type="circle"><li><p>pathname is the a common Unix pathname.</p></li><li><p>mode define the access mode</p></li></ul></div></li></ul></div><p>After creation, a FIFO can be opened like a file.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="unix_signals.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="unix.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="unix_file_system.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">4.&nbsp;Signals&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;6.&nbsp;File System</td></tr></table></div></body></html>